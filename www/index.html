<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><title>Flappy Cube</title>
<style>body{margin:0;overflow:hidden;background:#70c5ce}canvas{display:block;margin:0 auto;background:#70c5ce}#restartBtn{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);padding:15px 30px;font-size:18px;border:none;border-radius:10px;background:#ff5252;color:#fff;cursor:pointer;display:none}</style>
</head><body>
<canvas id="gameCanvas"></canvas><button id="restartBtn">Rejouer</button>
<script>
const canvas=document.getElementById("gameCanvas");const ctx=canvas.getContext("2d");
canvas.width=400;canvas.height=600;let cube,pipes,score,gameOver;
const gravity=.4,jump=-7,pipeWidth=60,gap=150;
function resetGame(){cube={x:50,y:200,w:30,h:30,dy:0};pipes=[];score=0;gameOver=false;document.getElementById("restartBtn").style.display="none";}
function addPipe(){let top=Math.random()*(canvas.height-gap-100)+50;pipes.push({x:canvas.width,top:top,bottom:top+gap});}
function drawCube(){ctx.fillStyle="#ff0";ctx.fillRect(cube.x,cube.y,cube.w,cube.h);}
function drawPipes(){ctx.fillStyle="#0f0";pipes.forEach(p=>{ctx.fillRect(p.x,0,pipeWidth,p.top);ctx.fillRect(p.x,p.bottom,pipeWidth,canvas.height-p.bottom);});}
function drawScore(){ctx.fillStyle="#fff";ctx.font="30px Arial";ctx.fillText(score,canvas.width/2,50);}
function endGame(){gameOver=true;ctx.fillStyle="rgba(0,0,0,.5)";ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle="#fff";ctx.font="40px Arial";ctx.fillText("Game Over",canvas.width/2-100,canvas.height/2-40);document.getElementById("restartBtn").style.display="block";}
function update(){if(gameOver)return;cube.dy+=gravity;cube.y+=cube.dy;pipes.forEach(p=>p.x-=3);
 if(pipes.length===0||pipes[pipes.length-1].x<canvas.width-200)addPipe();
 if(pipes[0]&&pipes[0].x+pipeWidth<0){pipes.shift();score++;}
 pipes.forEach(p=>{if(cube.x<p.x+pipeWidth&&cube.x+cube.w>p.x&&(cube.y<p.top||cube.y+cube.h>p.bottom))endGame();});
 if(cube.y+cube.h>canvas.height||cube.y<0)endGame();}
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);drawCube();drawPipes();drawScore();}
function loop(){update();draw();requestAnimationFrame(loop);}
document.addEventListener("keydown",()=>{if(!gameOver)cube.dy=jump;});
document.addEventListener("touchstart",()=>{if(!gameOver)cube.dy=jump;});
document.getElementById("restartBtn").onclick=()=>{resetGame();loop();};
resetGame();loop();
</script></body></html>
